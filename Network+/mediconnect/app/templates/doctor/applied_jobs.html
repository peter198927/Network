{% extends "base.html" %}

{% block title %}My Applications - MediConnect{% endblock %}

{% block content %}
<h2>My Job Applications</h2>

{% if applications.items %}
    <table class="table">
        <thead>
            <tr>
                <th>Job Title</th>
                <th>Hospital</th>
                <th>Specialization</th>
                <th>Applied Date</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for app in applications.items %}
                <tr>
                    <td>{{ app.job.title }}</td>
                    <td>{{ app.job.hospital.hospital_name }}</td>
                    <td>{{ app.job.specialization }}</td>
                    <td>{{ app.applied_at.strftime('%b %d, %Y') }}</td>
                    <td>
                        {% if app.status == 'pending' %}
                            <span class="badge badge-warning">Pending</span>
                        {% elif app.status == 'reviewed' %}
                            <span class="badge badge-info">Reviewed</span>
                        {% elif app.status == 'accepted' %}
                            <span class="badge badge-success">Accepted</span>
                        {% elif app.status == 'rejected' %}
                            <span class="badge badge-danger">Rejected</span>
                        {% endif %}
                    </td>
                    <td><a href="#" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">View</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Pagination -->
    <div style="text-align: center; margin: 2rem 0;">
        {% if applications.has_prev %}
            <a href="{{ url_for('doctor.my_applications', page=applications.prev_num) }}" class="btn btn-secondary">Previous</a>
        {% endif %}
        
        <span style="margin: 0 1rem;">Page {{ applications.page }} of {{ applications.pages }}</span>
        
        {% if applications.has_next %}
            <a href="{{ url_for('doctor.my_applications', page=applications.next_num) }}" class="btn btn-secondary">Next</a>
        {% endif %}
    </div>
{% else %}
    <div class="card">
        <p style="text-align: center; color: #666;">You haven't applied to any jobs yet. <a href="{{ url_for('doctor.browse_jobs') }}">Browse jobs</a></p>
    </div>
{% endif %}
{% endblock %}
